Tx_ImportStudip={changeSelection:function(b,a){switch(b){case"pagetype":Tx_ImportStudip.adjustToPageType();break;case"institute":Tx_ImportStudip.getExternConfigurations();Tx_ImportStudip.changeInstitute(a);break}},adjustToPageType:function(){if(TYPO3.jQuery("#tx-importstudip-institutes").find("input.tx-importstudip-selector:checked").length==0){Tx_ImportStudip.disableInput("tx-importstudip-externconfig")}var d=TYPO3.jQuery('#tx-importstudip-pagetypes input[type="radio"]:checked').val();var a=TYPO3.jQuery('select[data-formengine-input-name*="persondetailtarget"]').closest(Tx_ImportStudip.getElementName("container"));a.hide();var e=TYPO3.jQuery('select[data-formengine-input-name*="coursedetailtarget"]').closest(Tx_ImportStudip.getElementName("container"));e.hide();var g=TYPO3.jQuery('select[data-formengine-input-name*="newsdetailtarget"]').closest(Tx_ImportStudip.getElementName("container"));g.hide();var f=TYPO3.jQuery('select[data-formengine-input-name*="linktarget"]').closest(Tx_ImportStudip.getElementName("container"));f.hide();var c=TYPO3.jQuery("#tx-importstudip-module").closest(Tx_ImportStudip.getElementName("container"));c.hide();if(d!=""&&d!=null){switch(d){case"courses":Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-preselectinst");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");TYPO3.jQuery(".tx-importstudip-filters-container").show();Tx_ImportStudip.enableInput("tx-importstudip-aggregate",{action:"aggregationform",inputname:TYPO3.jQuery("#tx-importstudip-aggregate").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-aggregate").data("input-value")});Tx_ImportStudip.enableInput("tx-importstudip-participating",{action:"participatingform",inputname:TYPO3.jQuery("#tx-importstudip-participating").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-participating").data("input-value")});Tx_ImportStudip.enableInput("tx-importstudip-coursetypes",{action:"coursetypeform",inputname:TYPO3.jQuery("#tx-importstudip-coursetypes").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-coursetypes").data("input-value")});Tx_ImportStudip.enableInput("tx-importstudip-subjects",{action:"subjectsform",parent:"root",inputname:TYPO3.jQuery("#tx-importstudip-subjects").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-subjects").data("input-value")});Tx_ImportStudip.getInstitutes("tx-importstudip-institutes");TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").show();a.show();e.show();if(TYPO3.jQuery("#tx-importstudip-institutes").find('input[name*="settings.institute"]:checked').length>0){Tx_ImportStudip.getExternConfigurations("radio")}break;case"coursedetails":Tx_ImportStudip.disableInput("tx-importstudip-institutes");Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-aggregate");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-preselectinst");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");TYPO3.jQuery(".tx-importstudip-filters-container").hide();Tx_ImportStudip.enableInput("tx-importstudip-coursesearch");if(TYPO3.jQuery("#tx-importstudip-choose-course option").length>0){Tx_ImportStudip.enableInput("tx-importstudip-choose-course-institute",{action:"choosecourseinstitute",inputname:TYPO3.jQuery("#tx-importstudip-choose-course-institute").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-choose-course-institute").data("input-value"),courseid:TYPO3.jQuery("#tx-importstudip-choose-course option:selected").val()});Tx_ImportStudip.getExternConfigurations("course-select")}else{Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-externconfig")}TYPO3.jQuery("#tx-importstudip-externconfig").closest(Tx_ImportStudip.getElementName("container")).insertAfter(TYPO3.jQuery("#tx-importstudip-choose-course-institute").closest(Tx_ImportStudip.getElementName("container")));TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").show();a.show();break;case"persons":Tx_ImportStudip.disableInput("tx-importstudip-externconfig");Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-preselectinst");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");TYPO3.jQuery(".tx-importstudip-filters-container").show();if(TYPO3.jQuery("#tx-importstudip-institutes").find('input[type="radio"]:checked').length!=0){Tx_ImportStudip.enableInput("tx-importstudip-statusgroups",{action:"statusgroupform",inputname:TYPO3.jQuery("#tx-importstudip-statusgroups").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-statusgroups").data("input-value"),institute:TYPO3.jQuery("#tx-importstudip-institutes").find('input[type="radio"]:checked').val()})}Tx_ImportStudip.getInstitutes("tx-importstudip-institutes");TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").show();a.show();e.show();if(TYPO3.jQuery("#tx-importstudip-institutes").find('input[name*="settings.institute"]:checked').length>0){Tx_ImportStudip.getExternConfigurations("radio")}break;case"persondetails":Tx_ImportStudip.disableInput("tx-importstudip-institutes");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-aggregate");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-preselectinst");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");TYPO3.jQuery(".tx-importstudip-filters-container").hide();Tx_ImportStudip.enableInput("tx-importstudip-personsearch");if(TYPO3.jQuery("#tx-importstudip-choose-user option").length>0){var b=TYPO3.jQuery("#tx-importstudip-personsearch").find("select option:selected");if(b.length<1){b=TYPO3.jQuery("#tx-importstudip-personsearch").find("select option").first()}Tx_ImportStudip.getPersonInstitutes();Tx_ImportStudip.enableInput("tx-importstudip-choose-user-institute")}else{Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-externconfig")}TYPO3.jQuery("#tx-importstudip-externconfig").closest(Tx_ImportStudip.getElementName("container")).insertAfter(TYPO3.jQuery("#tx-importstudip-choose-user-institute").closest(Tx_ImportStudip.getElementName("container")));TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").show();e.show();break;case"news":Tx_ImportStudip.disableInput("tx-importstudip-externconfig");Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-aggregate");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-preselectinst");Tx_ImportStudip.getInstitutes("tx-importstudip-institutes");Tx_ImportStudip.enableInput("tx-importstudip-smallnews",{action:"smallnewsform",inputname:TYPO3.jQuery("#tx-importstudip-smallnews").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-smallnews").data("input-value")});TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").show();g.show();if(TYPO3.jQuery("#tx-importstudip-institutes").find('input[name*="settings.institute"]:checked').length>0){Tx_ImportStudip.getExternConfigurations("radio")}break;case"searchpage":Tx_ImportStudip.disableInput("tx-importstudip-institutes");Tx_ImportStudip.disableInput("tx-importstudip-externconfig");Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");TYPO3.jQuery(".tx-importstudip-filters-container").hide();TYPO3.jQuery(".tx-importstudip-linkingoptions-container").hide();Tx_ImportStudip.disableInput("tx-importstudip-aggregate");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");Tx_ImportStudip.getInstitutes("tx-importstudip-preselectinst");TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").hide()}TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"additionalfilters",configtype:TYPO3.jQuery("#tx-importstudip-pagetypes").find('input[type="radio"]:checked').val()},success:function(i,j,h){}});if(TYPO3.jQuery("#tx-importstudip-makelink-checkbox").prop("checked")){Tx_ImportStudip.enableInput("tx-importstudip-linktext");Tx_ImportStudip.enableInput("tx-importstudip-linkformat")}else{Tx_ImportStudip.disableInput("tx-importstudip-linktext");Tx_ImportStudip.disableInput("tx-importstudip-linkformat")}}else{Tx_ImportStudip.disableInput("tx-importstudip-institutes");Tx_ImportStudip.disableInput("tx-importstudip-personsearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-coursesearch");Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-filters");Tx_ImportStudip.disableInput("tx-importstudip-aggregate");Tx_ImportStudip.disableInput("tx-importstudip-statusgroups");Tx_ImportStudip.disableInput("tx-importstudip-participating");Tx_ImportStudip.disableInput("tx-importstudip-coursetypes");Tx_ImportStudip.disableInput("tx-importstudip-subjects");Tx_ImportStudip.disableInput("tx-importstudip-smallnews");Tx_ImportStudip.disableInput("tx-importstudip-linktext");Tx_ImportStudip.disableInput("tx-importstudip-linkformat");Tx_ImportStudip.disableInput("tx-importstudip-persondetailtarget");Tx_ImportStudip.disableInput("tx-importstudip-coursedetailtarget");Tx_ImportStudip.disableInput("tx-importstudip-newsdetailtarget");TYPO3.jQuery("div.tx-importstudip-linkingoptions-container").hide()}},adjustLinkOptions:function(){if(TYPO3.jQuery("#tx-importstudip-makelink-checkbox").prop("checked")){TYPO3.jQuery('input[data-formengine-input-name*="settings.persondetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).hide();TYPO3.jQuery('input[data-formengine-input-name*="settings.coursedetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).hide();TYPO3.jQuery('input[data-formengine-input-name*="settings.newsdetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).hide();Tx_ImportStudip.enableInput("tx-importstudip-linktext");Tx_ImportStudip.enableInput("tx-importstudip-linkformat");TYPO3.jQuery('input[data-formengine-input-name*="settings.linktarget"]').closest(Tx_ImportStudip.getElementName("label")).show();TYPO3.jQuery("#tx-importstudip-makelink-hidden").val(1)}else{if(TYPO3.jQuery("#courses:checked").length>0||TYPO3.jQuery("#coursedetails:checked").length>0){TYPO3.jQuery('input[data-formengine-input-name*="settings.persondetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).show()}if(TYPO3.jQuery("#courses:checked").length>0||TYPO3.jQuery("#persondetails:checked").length>0){TYPO3.jQuery('input[data-formengine-input-name*="settings.coursedetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).show()}if(TYPO3.jQuery("#news:checked").length>0){TYPO3.jQuery('input[data-formengine-input-name*="settings.newsdetailtarget"]').closest(Tx_ImportStudip.getElementName("label")).show()}Tx_ImportStudip.disableInput("tx-importstudip-linktext");Tx_ImportStudip.disableInput("tx-importstudip-linkformat");TYPO3.jQuery('input[data-formengine-input-name*="settings.linktarget"]').closest(Tx_ImportStudip.getElementName("label")).hide();TYPO3.jQuery("#tx-importstudip-makelink-hidden").val(0)}},getInstitutes:function(a){var b=TYPO3.jQuery("#"+a);b.parents(Tx_ImportStudip.getElementName("container")).show();if(TYPO3.jQuery("#"+a).find('input[type="radio"]').length==0){b.html(Tx_ImportStudip.getSpinner(b.data("loading-text")));TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"institutes",configtype:TYPO3.jQuery('#tx-importstudip-pagetypes input[type="radio"]:checked').val()},success:function(d,e,c){TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"instituteform",institutes:d.tx_importstudip,inputname:b.data("input-name"),selected:b.data("input-value")},success:function(f,h,g){b.html(f.tx_importstudip);Tx_ImportStudip.openSelectedParents(a);if(b.find('input[type="radio"]:checked').length>0){Tx_ImportStudip.getExternConfigurations("radio")}}})},error:function(c,e,d){b.html("Error: "+d)}})}},changeInstitute:function(b){var a=TYPO3.jQuery('#tx-importstudip-pagetypes input[type="radio"]:checked').val();if(a=="courses"){Tx_ImportStudip.getExternConfigurations("radio");TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"coursetypeform",institute:b,inputname:TYPO3.jQuery("#tx-importstudip-coursetypes").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-coursetypes").data("input-value")},success:function(c,e,d){TYPO3.jQuery("#tx-importstudip-coursetypes").html(c.tx_importstudip)}})}else{if(a=="persons"){Tx_ImportStudip.enableInput("tx-importstudip-aggregate",{action:"aggregationform",inputname:TYPO3.jQuery("#tx-importstudip-aggregate").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-aggregate").data("input-value")});Tx_ImportStudip.enableInput("tx-importstudip-statusgroups",{action:"statusgroupform",inputname:TYPO3.jQuery("#tx-importstudip-statusgroups").data("input-name"),value:TYPO3.jQuery("#tx-importstudip-statusgroups").data("input-value"),institute:b})}}},getExternConfigurations:function(b){var c=TYPO3.jQuery("#tx-importstudip-externconfig");c.parents(Tx_ImportStudip.getElementName("container")).show();c.html(Tx_ImportStudip.getSpinner(c.data("loading-text")));var a=null;switch(b){case"user-select":var a=TYPO3.jQuery("#tx-importstudip-choose-user-institute").children("select");if(a.children("option:selected").length>0){a=a.children("option:selected")}else{a=a.children("option").first()}break;case"course-select":var a=TYPO3.jQuery("#tx-importstudip-choose-course-institute").children("select");if(a.children("option:selected").length>0){a=a.children("option:selected")}else{a=a.children("option").first()}break;case"radio":default:a=TYPO3.jQuery("#tx-importstudip-institutes").find('input[type="radio"]:checked');break}TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"externconfigurations",institute:a.val(),configtype:TYPO3.jQuery("#tx-importstudip-pagetypes").find('input[type="radio"]:checked').val()},success:function(e,f,d){TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"externconfigurationsform",configurations:e.tx_importstudip,inputname:TYPO3.jQuery("#tx-importstudip-externconfig").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-externconfig").data("input-value")},success:function(g,i,h){TYPO3.jQuery("#tx-importstudip-externconfig").html(g.tx_importstudip);Tx_ImportStudip.setModuleName()},error:function(g,i,h){TYPO3.jQuery("#tx-importstudip-externconfig").html("Error: "+h)}});TYPO3.jQuery("#tx-importstudip-externconfig").html(html)},error:function(d,f,e){TYPO3.jQuery("#tx-importstudip-externconfig").html("Error: "+e)}})},setModuleName:function(){var a=TYPO3.jQuery("#tx-importstudip-externconfig").children("select");if(a.children("option:selected").length>0){var b=a.children("option:selected").data("module")}else{var b=a.children("option").first().data("module")}TYPO3.jQuery("#tx-importstudip-module").children("input").val(b)},performPersonSearch:function(){TYPO3.jQuery("#tx-importstudip-personsearch-result").html(Tx_ImportStudip.getSpinner(""));TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"personsearchform",searchterm:TYPO3.jQuery("#tx-importstudip-personsearchterm").val(),inputname:TYPO3.jQuery("#tx-importstudip-personsearch").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-personsearch").data("input-value")},success:function(a,c,b){TYPO3.jQuery("#tx-importstudip-personsearch-result").html(a.tx_importstudip);if(TYPO3.jQuery("#tx-importstudip-personsearch-result select").length>0){Tx_ImportStudip.enableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.enableInput("tx-importstudip-externconfig");Tx_ImportStudip.getPersonInstitutes()}else{Tx_ImportStudip.disableInput("tx-importstudip-choose-user-institute");Tx_ImportStudip.disableInput("tx-importstudip-externconfig")}},error:function(a,c,b){alert("Error: "+b)}});return false},getPersonInstitutes:function(){TYPO3.jQuery("#tx-importstudip-choose-user-institute").html(Tx_ImportStudip.getSpinner(""));var b=TYPO3.jQuery("#tx-importstudip-choose-user");if(b.children("option:selected").length>0){var a=TYPO3.jQuery("#tx-importstudip-choose-user option:selected").val()}else{var a=TYPO3.jQuery("#tx-importstudip-choose-user option").first().val()}TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"chooseuserinstitute",username:a,inputname:TYPO3.jQuery("#tx-importstudip-choose-user-institute").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-choose-user-institute").data("input-value")},success:function(c,e,d){TYPO3.jQuery("#tx-importstudip-choose-user-institute").html(c.tx_importstudip);Tx_ImportStudip.getExternConfigurations("user-select")},error:function(c,e,d){alert("Error: "+d)}});return false},performCourseSearch:function(){TYPO3.jQuery("#tx-importstudip-coursesearch-result").html(Tx_ImportStudip.getSpinner(""));TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"coursesearchform",searchterm:TYPO3.jQuery("#tx-importstudip-coursesearchterm").val(),semester:TYPO3.jQuery("#tx-importstudip-semester option:selected").val(),inputname:TYPO3.jQuery("#tx-importstudip-coursesearch").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-coursesearch").data("input-value")},success:function(a,c,b){TYPO3.jQuery("#tx-importstudip-coursesearch-result").html(a.tx_importstudip);if(TYPO3.jQuery("#tx-importstudip-coursesearch-result select").length>0){Tx_ImportStudip.enableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.enableInput("tx-importstudip-externconfig");Tx_ImportStudip.getCourseInstitutes()}else{Tx_ImportStudip.disableInput("tx-importstudip-choose-course-institute");Tx_ImportStudip.disableInput("tx-importstudip-externconfig")}},error:function(a,c,b){alert("Error: "+b)}});return false},getCourseInstitutes:function(){TYPO3.jQuery("#tx-importstudip-choose-course-institute").html(Tx_ImportStudip.getSpinner(""));var b=TYPO3.jQuery("#tx-importstudip-choose-course");if(b.children("option:selected").length>0){var a=TYPO3.jQuery("#tx-importstudip-choose-course option:selected").val()}else{var a=TYPO3.jQuery("#tx-importstudip-choose-course option").first().val()}TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"choosecourseinstitute",courseid:a,inputname:TYPO3.jQuery("#tx-importstudip-choose-course-institute").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-choose-course-institute").data("input-value")},success:function(c,e,d){TYPO3.jQuery("#tx-importstudip-choose-course-institute").html(c.tx_importstudip);Tx_ImportStudip.getExternConfigurations("course-select")},error:function(c,e,d){alert("Error: "+d)}});return false},getSubjects:function(b){var a=TYPO3.jQuery("#tx-importstudip-subject-"+b).siblings("ul.tx-importstudip-tree").children("li");a.show();a.html(Tx_ImportStudip.getSpinner(a.data("loading-text")));TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:{action:"subjectsform",parent:b,inputname:TYPO3.jQuery("#tx-importstudip-subjects").data("input-name"),selected:TYPO3.jQuery("#tx-importstudip-subjects").data("input-value")},success:function(c,e,d){TYPO3.jQuery("#tx-importstudip-subject-"+b).siblings("ul.tx-importstudip-tree").remove();TYPO3.jQuery("#tx-importstudip-subject-"+b).parent().append(c.tx_importstudip);TYPO3.jQuery("#tx-importstudip-subject-"+b).removeAttr("onclick")},error:function(c,e,d){alert("Error: "+d)}})},openSelectedParents:function(b){var a=TYPO3.jQuery("#"+b).find(".tx-importstudip-selector:checked");if(a.length>0){a.parents(".tx-importstudip-treebranch").children("input.tx-importstudip-treeinput").attr("checked",true);a.parents(".tx-importstudip-treebranch").children("img.tx-importstudip-openclose").each(function(){Tx_ImportStudip.swapImages(TYPO3.jQuery(this).attr("id"))})}else{TYPO3.jQuery("#"+b).find("input.tx-importstudip-treeinput").first().attr("checked",true)}},enableInput:function(b,a){TYPO3.jQuery("#"+b).closest(Tx_ImportStudip.getElementName("container")).show();if(a!=""&&a!=null){TYPO3.jQuery.ajax({url:TYPO3.settings.ajaxUrls["ImportStudip::AjaxHandler"],method:"post",data:a,success:function(c,e,d){TYPO3.jQuery("#"+b).html(c.tx_importstudip)},error:function(c,e,d){alert("Error: "+d)}})}},disableInput:function(a){TYPO3.jQuery("#"+a).html();TYPO3.jQuery("#"+a).closest(Tx_ImportStudip.getElementName("container")).hide()},getSpinner:function(a){html="";if(a!=""){html+=a}return html},buildEntryGroup:function(b,e){var d=TYPO3.jQuery("#"+b);for(var c=0;c<e.length;c++){d.append(TYPO3.jQuery("#"+e[c]).closest(Tx_ImportStudip.getElementName("container")))}d.hide();var a=d.closest(Tx_ImportStudip.getElementName("container"));a.addClass("tx-importstudip-entrygroup");a.addClass(b+"-container");a.children(Tx_ImportStudip.getElementName("label")).prepend('<img src="'+TYPO3.jQuery("#tx-importstudip-pagetypes").data("iconpath")+'plus.gif" data-toggle-image="'+TYPO3.jQuery("#tx-importstudip-pagetypes").data("iconpath")+'minus.gif"/>');a.children(Tx_ImportStudip.getElementName("label")).children("img, label").on("click",function(){d.toggle();var g=a.children(Tx_ImportStudip.getElementName("label")).children("img");var h=g.attr("src");var f=g.data("toggle-image");g.attr("src",f);g.data("toggle-image",h)})},swapImages:function(a){var b=TYPO3.jQuery("#"+a);if(b.length>0){var d=b.attr("src");var c=b.data("swap-img");b.data("swap-img",d);b.attr("src",c)}return false},getElementName:function(c){var b="";var a=(TYPO3.jQuery("div.t3-form-field-container").length>0)?6:7;switch(c){case"container":b=(a==6)?".t3-form-field-container":".form-section";break;case"label":b=(a==6)?".t3-form-field-label":".form-group";break;case"inputname":b=(a==6)?"name":"data-formengine-input-name";break}return b}};TYPO3.jQuery(function(){Tx_ImportStudip.openSelectedParents("tx-importstudip-institutes");Tx_ImportStudip.buildEntryGroup("tx-importstudip-filters",["tx-importstudip-aggregate","tx-importstudip-participating","tx-importstudip-coursetypes","tx-importstudip-subjects","tx-importstudip-statusgroups","tx-importstudip-smallnews","tx-importstudip-preselectinst"]);Tx_ImportStudip.buildEntryGroup("tx-importstudip-linkingoptions",["tx-importstudip-makelink","tx-importstudip-linktext","tx-importstudip-linkformat"]);var a=TYPO3.jQuery("#tx-importstudip-linkingoptions");a.append(TYPO3.jQuery("select["+Tx_ImportStudip.getElementName("inputname")+'*="persondetailtarget"]').closest(Tx_ImportStudip.getElementName("container")));a.append(TYPO3.jQuery("select["+Tx_ImportStudip.getElementName("inputname")+'*="coursedetailtarget"]').closest(Tx_ImportStudip.getElementName("container")));a.append(TYPO3.jQuery("select["+Tx_ImportStudip.getElementName("inputname")+'*="newsdetailtarget"]').closest(Tx_ImportStudip.getElementName("container")));a.append(TYPO3.jQuery("select["+Tx_ImportStudip.getElementName("inputname")+'*="linktarget"]').closest(Tx_ImportStudip.getElementName("container")));Tx_ImportStudip.adjustToPageType();Tx_ImportStudip.adjustLinkOptions();TYPO3.jQuery("input#tx-importstudip-personsearchterm").on("keypress",function(b){if(b.which==13){b.preventDefault();TYPO3.jQuery("button#tx-importstudip-execute-personsearch").click()}});TYPO3.jQuery("input#tx-importstudip-coursesearchterm").on("keypress",function(b){if(b.which==13){b.preventDefault();TYPO3.jQuery("button#tx-importstudip-execute-coursesearch").click()}})});